!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.segmentEdit=t()}}(function(){var t;return function e(t,n,r){function i(s,o){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return i(n?n:e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e){function n(t){var e=t.prototype,n=e.draw,i=e.load,a={load:function(t){i.apply(this,arguments);var e=t.id();return t.on(e+":drag",this.onDrag.bind(this)),t.on(e+":mouseup",this.mouseUp.bind(this)),t.on(e+":mouseout",this.base.xZoomSet.bind(this.base)),document.body.addEventListener("mousedown",this.mouseDown.bind(this)),this},draw:function(t){this.g.selectAll("."+this.unitClass).classed("selectable",!0),n.call(this,t)},mouseUp:function(){var t=this.base.svg;t.classed("handle-resize",!1),t.classed("handle-drag",!1)},mouseDown:function(t){if(0===t.button){var e=t.target;this.clicked(e)?this.itemMouseDown(t):e.classList.contains("keep-selection")||this.unselectAll()}},unselectAll:function(){this.base.svg.selectAll(".selected").classed("selected",!1)},itemMouseDown:function(t){var e=this.d3,n=this.g,r=t.target.parentNode,i=n.node().querySelectorAll(".selected"),a=[].indexOf.call(i,r)>=0,s=r.classList.contains("selectable"),o=e.select(r).classed("selected");this.base.toFront(r),!(i.length<1)&&a||t.shiftKey||this.unselectAll(),t.shiftKey&&o?e.select(r).classed("selected",!1):s&&e.select(r).classed("selected",!0)}};return r(e,a),t}var r=t("utils").extend;e.exports=n},{utils:2}],2:[function(t,e){var n=function(t){var e=arguments[1];if(void 0===e&&(e=null),!e)throw new Error("Property name is mandatory.");var n=function(){var e=arguments[0];void 0===e&&(e=null);var n="__"+e;t.hasOwnProperty(n)||(t[n]=null),t[e]=function(){var e=arguments[0];return void 0===e&&(e=null),null===e?t[n]:(t[n]=e,t)}};Array.isArray(e)?e.forEach(function(t){return n(t)}):n(e)},r=function i(){var t=Array.prototype.slice.call(arguments),e=t.shift(),n=t.shift();for(var r in n)e[r]=n[r];return t.unshift(e),t.length>1?i.apply(null,t):e};e.exports={extend:r,getSet:n}},{}],3:[function(t,e){var n=t("./package.json"),r=t("utils").getSet,i=t("underscore.string"),a=function(){"use strict";function t(){this.unitClass=null,this.dname=null,this.xBaseDomain=null,this.yScale=null,this.base=null,this.g=null,this.on=null,this.trigger=null,this.selectable=!1,this.__params={},this.params({name:n.name||"layer",opacity:1,height:1,top:0,color:"#000",selectable:!1,xDomain:null,yDomain:null,yRange:null})}var e=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),r=Object.getOwnPropertyDescriptor,a=function(t,n){for(var i in n)n.hasOwnProperty(i)&&e(t,i,r(n,i));return t},s={};return e(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.param=function(){var t=arguments[0];void 0===t&&(t=null);var e=arguments[1];return void 0===e&&(e=null),null===e?this.__params[t]:(this.__params[t]=e,this)},s.params=function(){var t=arguments[0];if(void 0===t&&(t=null),null===t)return this.__params;for(var e in t)this.__params[e]=t[e];return this},s.name=function(){var t=arguments[0];return void 0===t&&(t=null),null===t?this.__params.name:(this.__params.name=t,this)},s.data=function(){var t=arguments[0];return void 0===t&&(t=null),t?(this.__data=t,this):this.__data},s.load=function(t,e){this.base=t,this.unitClass=this.name()+"-item",this.dname=i.slugify(this.name()),Object.getPrototypeOf(this).d3=e},s.bind=function(t){this.g=t,this.update()},s.update=function(t){this.data(t||this.data()||this.base.data()),this.zoomFactor=this.base.zoomFactor},s.draw=function(){},s.xZoom=function(){},a(t.prototype,s),s=void 0,t}();r(a.prototype,"each"),e.exports=a},{"./package.json":6,"underscore.string":4,utils:5}],4:[function(e,n,r){!function(e,i){"use strict";function a(t,e){var n,r,i=t.toLowerCase();for(e=[].concat(e),n=0;n<e.length;n+=1)if(r=e[n]){if(r.test&&r.test(t))return!0;if(r.toLowerCase()===i)return!0}}var s=i.prototype.trim,o=i.prototype.trimRight,l=i.prototype.trimLeft,u=function(t){return 1*t||0},c=function(t,e){if(1>e)return"";for(var n="";e>0;)1&e&&(n+=t),e>>=1,t+=t;return n},h=[].slice,f=function(t){return null==t?"\\s":t.source?t.source:"["+v.escapeRegExp(t)+"]"},p={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},d={};for(var g in p)d[p[g]]=g;d["'"]="#39";var m=function(){function t(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}var e=c,n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,r){var a,s,o,l,u,c,h,f=1,p=n.length,d="",g=[];for(s=0;p>s;s++)if(d=t(n[s]),"string"===d)g.push(n[s]);else if("array"===d){if(l=n[s],l[2])for(a=r[f],o=0;o<l[2].length;o++){if(!a.hasOwnProperty(l[2][o]))throw new Error(m('[_.sprintf] property "%s" does not exist',l[2][o]));a=a[l[2][o]]}else a=l[1]?r[l[1]]:r[f++];if(/[^s]/.test(l[8])&&"number"!=t(a))throw new Error(m("[_.sprintf] expecting number but found %s",t(a)));switch(l[8]){case"b":a=a.toString(2);break;case"c":a=i.fromCharCode(a);break;case"d":a=parseInt(a,10);break;case"e":a=l[7]?a.toExponential(l[7]):a.toExponential();break;case"f":a=l[7]?parseFloat(a).toFixed(l[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=i(a))&&l[7]?a.substring(0,l[7]):a;break;case"u":a=Math.abs(a);break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}a=/[def]/.test(l[8])&&l[3]&&a>=0?"+"+a:a,c=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",h=l[6]-i(a).length,u=l[6]?e(c,h):"",g.push(l[5]?a+u:u+a)}return g.join("")},n.cache={},n.parse=function(t){for(var e=t,n=[],r=[],i=0;e;){if(null!==(n=/^[^\x25]+/.exec(e)))r.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(e)))r.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw new Error("[_.sprintf] huh?");if(n[2]){i|=1;var a=[],s=n[2],o=[];if(null===(o=/^([a-z_][a-z_\d]*)/i.exec(s)))throw new Error("[_.sprintf] huh?");for(a.push(o[1]);""!==(s=s.substring(o[0].length));)if(null!==(o=/^\.([a-z_][a-z_\d]*)/i.exec(s)))a.push(o[1]);else{if(null===(o=/^\[(\d+)\]/.exec(s)))throw new Error("[_.sprintf] huh?");a.push(o[1])}n[2]=a}else i|=2;if(3===i)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(n)}e=e.substring(n[0].length)}return r},n}(),v={VERSION:"2.3.0",isBlank:function(t){return null==t&&(t=""),/^\s*$/.test(t)},stripTags:function(t){return null==t?"":i(t).replace(/<\/?[^>]+>/g,"")},capitalize:function(t){return t=null==t?"":i(t),t.charAt(0).toUpperCase()+t.slice(1)},chop:function(t,e){return null==t?[]:(t=i(t),e=~~e,e>0?t.match(new RegExp(".{1,"+e+"}","g")):[t])},clean:function(t){return v.strip(t).replace(/\s+/g," ")},count:function(t,e){if(null==t||null==e)return 0;t=i(t),e=i(e);for(var n=0,r=0,a=e.length;;){if(r=t.indexOf(e,r),-1===r)break;n++,r+=a}return n},chars:function(t){return null==t?[]:i(t).split("")},swapCase:function(t){return null==t?"":i(t).replace(/\S/g,function(t){return t===t.toUpperCase()?t.toLowerCase():t.toUpperCase()})},escapeHTML:function(t){return null==t?"":i(t).replace(/[&<>"']/g,function(t){return"&"+d[t]+";"})},unescapeHTML:function(t){return null==t?"":i(t).replace(/\&([^;]+);/g,function(t,e){var n;return e in p?p[e]:(n=e.match(/^#x([\da-fA-F]+)$/))?i.fromCharCode(parseInt(n[1],16)):(n=e.match(/^#(\d+)$/))?i.fromCharCode(~~n[1]):t})},escapeRegExp:function(t){return null==t?"":i(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(t,e,n,r){var i=v.chars(t);return i.splice(~~e,~~n,r),i.join("")},insert:function(t,e,n){return v.splice(t,e,0,n)},include:function(t,e){return""===e?!0:null==t?!1:-1!==i(t).indexOf(e)},join:function(){var t=h.call(arguments),e=t.shift();return null==e&&(e=""),t.join(e)},lines:function(t){return null==t?[]:i(t).split("\n")},reverse:function(t){return v.chars(t).reverse().join("")},startsWith:function(t,e){return""===e?!0:null==t||null==e?!1:(t=i(t),e=i(e),t.length>=e.length&&t.slice(0,e.length)===e)},endsWith:function(t,e){return""===e?!0:null==t||null==e?!1:(t=i(t),e=i(e),t.length>=e.length&&t.slice(t.length-e.length)===e)},succ:function(t){return null==t?"":(t=i(t),t.slice(0,-1)+i.fromCharCode(t.charCodeAt(t.length-1)+1))},titleize:function(t){return null==t?"":(t=i(t).toLowerCase(),t.replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()}))},camelize:function(t){return v.trim(t).replace(/[-_\s]+(.)?/g,function(t,e){return e?e.toUpperCase():""})},underscored:function(t){return v.trim(t).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(t){return v.trim(t).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(t){return v.titleize(i(t).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(t){return v.capitalize(v.underscored(t).replace(/_id$/,"").replace(/_/g," "))},trim:function(t,e){return null==t?"":!e&&s?s.call(t):(e=f(e),i(t).replace(new RegExp("^"+e+"+|"+e+"+$","g"),""))},ltrim:function(t,e){return null==t?"":!e&&l?l.call(t):(e=f(e),i(t).replace(new RegExp("^"+e+"+"),""))},rtrim:function(t,e){return null==t?"":!e&&o?o.call(t):(e=f(e),i(t).replace(new RegExp(e+"+$"),""))},truncate:function(t,e,n){return null==t?"":(t=i(t),n=n||"...",e=~~e,t.length>e?t.slice(0,e)+n:t)},prune:function(t,e,n){if(null==t)return"";if(t=i(t),e=~~e,n=null!=n?i(n):"...",t.length<=e)return t;var r=function(t){return t.toUpperCase()!==t.toLowerCase()?"A":" "},a=t.slice(0,e+1).replace(/.(?=\W*\w*$)/g,r);return a=a.slice(a.length-2).match(/\w\w/)?a.replace(/\s*\S+$/,""):v.rtrim(a.slice(0,a.length-1)),(a+n).length>t.length?t:t.slice(0,a.length)+n},words:function(t,e){return v.isBlank(t)?[]:v.trim(t,e).split(e||/\s+/)},pad:function(t,e,n,r){t=null==t?"":i(t),e=~~e;var a=0;switch(n?n.length>1&&(n=n.charAt(0)):n=" ",r){case"right":return a=e-t.length,t+c(n,a);case"both":return a=e-t.length,c(n,Math.ceil(a/2))+t+c(n,Math.floor(a/2));default:return a=e-t.length,c(n,a)+t}},lpad:function(t,e,n){return v.pad(t,e,n)},rpad:function(t,e,n){return v.pad(t,e,n,"right")},lrpad:function(t,e,n){return v.pad(t,e,n,"both")},sprintf:m,vsprintf:function(t,e){return e.unshift(t),m.apply(null,e)},toNumber:function(t,e){return t?(t=v.trim(t),t.match(/^-?\d+(?:\.\d+)?$/)?u(u(t).toFixed(~~e)):0/0):0},numberFormat:function(t,e,n,r){if(isNaN(t)||null==t)return"";t=t.toFixed(~~e),r="string"==typeof r?r:",";var i=t.split("."),a=i[0],s=i[1]?(n||".")+i[1]:"";return a.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+s},strRight:function(t,e){if(null==t)return"";t=i(t),e=null!=e?i(e):e;var n=e?t.indexOf(e):-1;return~n?t.slice(n+e.length,t.length):t},strRightBack:function(t,e){if(null==t)return"";t=i(t),e=null!=e?i(e):e;var n=e?t.lastIndexOf(e):-1;return~n?t.slice(n+e.length,t.length):t},strLeft:function(t,e){if(null==t)return"";t=i(t),e=null!=e?i(e):e;var n=e?t.indexOf(e):-1;return~n?t.slice(0,n):t},strLeftBack:function(t,e){if(null==t)return"";t+="",e=null!=e?""+e:e;var n=t.lastIndexOf(e);return~n?t.slice(0,n):t},toSentence:function(t,e,n,r){e=e||", ",n=n||" and ";var i=t.slice(),a=i.pop();return t.length>2&&r&&(n=v.rtrim(e)+n),i.length?i.join(e)+n+a:a},toSentenceSerial:function(){var t=h.call(arguments);return t[3]=!0,v.toSentence.apply(v,t)},slugify:function(t){if(null==t)return"";var e="ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",n="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",r=new RegExp(f(e),"g");return t=i(t).toLowerCase().replace(r,function(t){var r=e.indexOf(t);return n.charAt(r)||"-"}),v.dasherize(t.replace(/[^\w\s-]/g,""))},surround:function(t,e){return[e,t,e].join("")},quote:function(t,e){return v.surround(t,e||'"')},unquote:function(t,e){return e=e||'"',t[0]===e&&t[t.length-1]===e?t.slice(1,t.length-1):t},exports:function(){var t={};for(var e in this)this.hasOwnProperty(e)&&!e.match(/^(?:include|contains|reverse)$/)&&(t[e]=this[e]);return t},repeat:function(t,e,n){if(null==t)return"";if(e=~~e,null==n)return c(i(t),e);for(var r=[];e>0;r[--e]=t);return r.join(n)},naturalCmp:function(t,e){if(t==e)return 0;if(!t)return-1;if(!e)return 1;for(var n=/(\.\d+)|(\d+)|(\D+)/g,r=i(t).toLowerCase().match(n),a=i(e).toLowerCase().match(n),s=Math.min(r.length,a.length),o=0;s>o;o++){var l=r[o],u=a[o];if(l!==u){var c=parseInt(l,10);if(!isNaN(c)){var h=parseInt(u,10);if(!isNaN(h)&&c-h)return c-h}return u>l?-1:1}}return r.length===a.length?r.length-a.length:e>t?-1:1},levenshtein:function(t,e){if(null==t&&null==e)return 0;if(null==t)return i(e).length;if(null==e)return i(t).length;t=i(t),e=i(e);for(var n,r,a=[],s=0;s<=e.length;s++)for(var o=0;o<=t.length;o++)r=s&&o?t.charAt(o-1)===e.charAt(s-1)?n:Math.min(a[o],a[o-1],n)+1:s+o,n=a[o],a[o]=r;return a.pop()},toBoolean:function(t,e,n){return"number"==typeof t&&(t=""+t),"string"!=typeof t?!!t:(t=v.trim(t),a(t,e||["true","1"])?!0:a(t,n||["false","0"])?!1:void 0)}};v.strip=v.trim,v.lstrip=v.ltrim,v.rstrip=v.rtrim,v.center=v.lrpad,v.rjust=v.lpad,v.ljust=v.rpad,v.contains=v.include,v.q=v.quote,v.toBool=v.toBoolean,"undefined"!=typeof r&&("undefined"!=typeof n&&n.exports&&(n.exports=v),r._s=v),"function"==typeof t&&t.amd&&t("underscore.string",[],function(){return v}),e._=e._||{},e._.string=e._.str=v}(this,String)},{}],5:[function(t,e){e.exports=t(2)},{}],6:[function(t,e){e.exports={name:"layer-vis",version:"0.1.0",description:"Base layer object with common logic",main:"layer-vis.js",scripts:{test:'echo "Error: no test specified" && exit 1'},author:"Victor Saiz",license:"BSD-3",dependencies:{"underscore.string":"^2.3.3",utils:"git://github.com/ircam-rnd/utils"}}},{}],7:[function(t,e){e.exports=t(2)},{}],8:[function(t,e){e.exports={name:"segment-vis",version:"0.2.1",description:"Segment visualiser component",main:"segment-vis.js",scripts:{test:'echo "Error: no test specified" && exit 1'},author:"Victor Saiz",license:"BSD-3",dependencies:{"layer-vis":"git://github.com/ircam-rnd/layer-vis",utils:"git://github.com/ircam-rnd/utils"},devDependencies:{}}},{}],9:[function(t,e){"use strict";var n=t("layer-vis"),r=t("./package.json"),i=t("utils").getSet,a=function(t){function e(){return this instanceof e?(t.call(this),this.param("name",r.name.replace("-vis","")),this.__minWidth=1,this.__handleWidth=3,this.y(function(t){var e=arguments[1];return void 0===e&&(e=null),null===e?+t.y||0:(t.y=+e,void 0)}),this.height(function(t){var e=arguments[1];return void 0===e&&(e=null),null===e?+t.height||1:(t.height=+e,void 0)}),this.duration(function(t){var e=arguments[1];return void 0===e&&(e=null),null===e?+t.duration||1:(t.duration=+e,void 0)}),this.start(function(t){var e=arguments[1];return void 0===e&&(e=null),null===e?+t.start||0:(t.start=+e,void 0)}),this.color(function(t){var e=arguments[1];return void 0===e&&(e=null),null===e?t.color+"":(t.color=e+"",void 0)}),void 0):new e}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,a(e,n));return t},o=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},l=Object.create;n||s(e,t);var u={};return null!==t&&o(e,t),e.prototype=l(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),i(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),u.update=function(e){t.prototype.update.call(this,e);var n=this.g.selectAll("."+this.unitClass).data(this.data(),this.sortIndex()),r=n.enter().append("g").attr("class",this.unitClass).attr("id",function(t){return t.id});r.append("rect").attr("class","seg").attr("fill-opacity",this.param("opacity")),r.append("line").attr("class","handle left").style("stroke-width",this.__handleWidth).attr("stroke-opacity",0),r.append("line").attr("class","handle right").style("stroke-width",this.__handleWidth).attr("stroke-opacity",0),n.exit().remove(),this.draw()},u.draw=function(t){t=t||this.g.selectAll("."+this.unitClass);var e=this,n=(this.g,.5*this.__handleWidth),r=this.base,i=this.base.xScale,a=Math.max,s=this.start(),o=this.duration(),l=this.y(),u=this.color(),c=this.height(),h=function(t){return i(s(t))},f=function(t){return a(e.__minWidth,i(s(t)+o(t))-i(s(t)))},p=function(t){return a(r.height()-e.yScale(c(t)),1)},d=function(t){return e.yScale(l(t))-p(t)},g=function(t){return i(s(t))+n},m=function(t){var r=i(s(t)+o(t))-i(s(t)),a=i(s(t)+o(t))-n;return r<e.__minWidth?s(t)+2*(e.__minWidth+e.__handleWidth):a},v=function(t){return d(t)+p(t)},y=function(t){return u(t)},b=t.selectAll(".seg");b.attr("x",h).attr("y",d).attr("width",f).attr("height",p).attr("fill",y),this.each()&&t.each(this.each()),t.selectAll(".handle.left").attr("x1",g).attr("x2",g).attr("y1",d).attr("y2",v).attr("fill",y).style("stroke",y),t.selectAll(".handle.right").attr("x1",m).attr("x2",m).attr("y1",d).attr("y2",v).attr("fill",y).style("stroke",y)},u.xZoom=function(){var t=this,e=this.base.xScale,n=e.domain()[0],r=e.domain()[1],i=[];this.data().forEach(function(e){var a=t.start()(e),s=t.duration()(e),o=a+s;(a>n&&r>o||n>a&&r>o&&o>n||a>n&&r>a&&o>r||o>r&&n>a)&&i.push(e)}),this.update()},s(e.prototype,u),u=void 0,e}(n);i(a.prototype,["y","width","color","height","duration","start","sortIndex"]),e.exports=a},{"./package.json":8,"layer-vis":3,utils:7}],10:[function(t,e){var n=t("segment-vis"),r=t("make-editable"),i=function(t){"use strict";function e(){return this instanceof e?(t.call(this),this.param("edits",["x","y","width","height"]),void 0):new e}var n=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&r(t,n,i(e,n));return t},s=Object.setPrototypeOf||function(t,e){return n?t.__proto__=e:r(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},o=Object.create;n||a(e,t);var l={};return null!==t&&s(e,t),e.prototype=o(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.brushItem=function(t,e){e=e||"xy";var n=e.indexOf("x")>=0,r=e.indexOf("y")>=0,i=!1,a=!1,s=this.start(),o=this.duration(),l=this.y(),u=this.height();this.g.selectAll(".selectable").classed("selected",function(e){if(n){var c=s(e),h=c+o(e),f=t[0][0]<=c&&h<t[1][0],p=t[0][0]<=h&&c<t[1][0];i=f||p}else i=!0;if(r){var d=l(e),g=d+u(e),m=t[0][1]<=d&&g<t[1][1],v=t[0][1]<=g&&d<=t[1][1];a=m||v}else a=!0;return i&&a})},l.clicked=function(t){return t.classList.contains("seg")||"line"===t.tagName},l.onDrag=function(t){if(!this.base.brushing()){var e=t.dragged.classList,n="mv";e.contains("left")>0&&(n="l"),e.contains("right")>0&&(n="r"),this.handleDrag.call(this,n,t)}},l.handleDrag=function(t,e){var n=e.d,r=e.event,i=e.target,a=this.base.xScale,s=this.param("edits"),o=!!~s.indexOf("x"),l=!!~s.indexOf("y"),u=!!~s.indexOf("width"),c=(!!~s.indexOf("height"),this.start()),h=this.duration(),f=this.y();"l"===t||"r"===t?this.base.svg.classed("handle-resize",!0):this.base.svg.classed("handle-drag",!0);var p=a(h(n)),d=a(c(n));if("l"===t&&u&&(p-=r.dx),"r"===t&&u&&(p+=r.dx),"l"!==t&&"r"!==t||!u||(1>p&&(p=1),h(n,a.invert(p))),"l"===t&&u&&(d+=r.dx,c(n,a.invert(d))),"mv"===t&&o&&(d+=r.dx,c(n,a.invert(d))),"mv"===t&&l){var g=this.yScale(f(n));g+=r.dy,f(n,this.yScale.invert(g))}this.draw(this.d3.select(i))},a(e.prototype,l),l=void 0,e}(n);r(i),e.exports=i},{"make-editable":1,"segment-vis":9}]},{},[10])(10)});