<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">shapes/segment.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/wavesjs/ui" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/shapes/annotated-marker.js~AnnotatedMarker.html">AnnotatedMarker</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/shapes/annotated-segment.js~AnnotatedSegment.html">AnnotatedSegment</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/shapes/base-shape.js~BaseShape.html">BaseShape</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/shapes/cursor.js~Cursor.html">Cursor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/shapes/dot.js~Dot.html">Dot</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/shapes/line.js~Line.html">Line</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/shapes/marker.js~Marker.html">Marker</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/shapes/segment.js~Segment.html">Segment</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/shapes/ticks.js~Ticks.html">Ticks</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/shapes/trace-dots.js~TraceDots.html">TraceDots</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/shapes/trace-path.js~TracePath.html">TracePath</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/shapes/waveform.js~Waveform.html">Waveform</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">shapes/segment.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import BaseShape from &apos;./base-shape&apos;;


export default class Segment extends BaseShape {
  getClassName() { return &apos;segment&apos;; }

  _getAccessorList() {
    return { x: 0, y: 0, width: 0, height: 1, color: &apos;#000000&apos;, opacity: 1 };
  }

  _getDefaults() {
    return {
      displayHandlers: true,
      handlerWidth: 2,
      handlerOpacity: 0.8,
      opacity: 0.6
    };
  }

  render(renderingContext) {
    if (this.$el) { return this.$el; }

    this.$el = document.createElementNS(this.ns, &apos;g&apos;);

    this.$segment = document.createElementNS(this.ns, &apos;rect&apos;);
    this.$segment.classList.add(&apos;segment&apos;);
    this.$segment.style.opacity = this.params.opacity;
    this.$segment.setAttributeNS(null, &apos;shape-rendering&apos;, &apos;crispEdges&apos;);

    this.$el.appendChild(this.$segment);

    if (this.params.displayHandlers) {
      this.$leftHandler = document.createElementNS(this.ns, &apos;rect&apos;);
      this.$leftHandler.classList.add(&apos;left&apos;, &apos;handler&apos;);
      this.$leftHandler.setAttributeNS(null, &apos;width&apos;, this.params.handlerWidth);
      this.$leftHandler.setAttributeNS(null, &apos;shape-rendering&apos;, &apos;crispEdges&apos;);
      this.$leftHandler.style.opacity = this.params.handlerOpacity;
      this.$leftHandler.style.cursor = &apos;ew-resize&apos;;

      this.$rightHandler = document.createElementNS(this.ns, &apos;rect&apos;);
      this.$rightHandler.classList.add(&apos;right&apos;, &apos;handler&apos;);
      this.$rightHandler.setAttributeNS(null, &apos;width&apos;, this.params.handlerWidth);
      this.$rightHandler.setAttributeNS(null, &apos;shape-rendering&apos;, &apos;crispEdges&apos;);
      this.$rightHandler.style.opacity = this.params.handlerOpacity;
      this.$rightHandler.style.cursor = &apos;ew-resize&apos;;

      this.$el.appendChild(this.$leftHandler);
      this.$el.appendChild(this.$rightHandler);
    }

    return this.$el;
  }

  update(renderingContext, datum) {
    const x = renderingContext.timeToPixel(this.x(datum));
    const y = renderingContext.valueToPixel(this.y(datum));

    const width = renderingContext.timeToPixel(this.width(datum));
    const height = renderingContext.valueToPixel(this.height(datum));
    const color = this.color(datum);
    const opacity = this.opacity(datum);

    this.$el.setAttributeNS(null, &apos;transform&apos;, `translate(${x}, ${y})`);
    this.$el.style.opacity = opacity;

    this.$segment.setAttributeNS(null, &apos;width&apos;, Math.max(width, 0));
    this.$segment.setAttributeNS(null, &apos;height&apos;, height);
    this.$segment.style.fill = color;

    if (this.params.displayHandlers) {
      // display handlers
      this.$leftHandler.setAttributeNS(null, &apos;height&apos;, height);
      this.$leftHandler.setAttributeNS(null, &apos;transform&apos;, &apos;translate(0, 0)&apos;);
      this.$leftHandler.style.fill = color;

      const rightHandlerTranslate = `translate(${width - this.params.handlerWidth}, 0)`;
      this.$rightHandler.setAttributeNS(null, &apos;height&apos;, height);
      this.$rightHandler.setAttributeNS(null, &apos;transform&apos;, rightHandlerTranslate);
      this.$rightHandler.style.fill = color;
    }
  }

  inArea(renderingContext, datum, x1, y1, x2, y2) {
    const shapeX1 = renderingContext.timeToPixel(this.x(datum));
    const shapeX2 = renderingContext.timeToPixel(this.x(datum) + this.width(datum));
    const shapeY1 = renderingContext.valueToPixel(this.y(datum));
    const shapeY2 = renderingContext.valueToPixel(this.y(datum) + this.height(datum));

    // http://jsfiddle.net/uthyZ/ - check overlaping area
    const xOverlap = Math.max(0, Math.min(x2, shapeX2) - Math.max(x1, shapeX1));
    const yOverlap = Math.max(0, Math.min(y2, shapeY2) - Math.max(y1, shapeY1));
    const area = xOverlap * yOverlap;

    return area &gt; 0;
  }
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.1)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
